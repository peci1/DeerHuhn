DeerHuhn.Animals.AnimalFactory.prototype.roadPaths = [
    new DeerHuhn.ScenePath(3, 93, 327, 644, 399),
    new DeerHuhn.ScenePath(4, 2650, 333, 3705, 333),
    new DeerHuhn.ScenePath(3, 2248, 784, 3106, 525),
];

DeerHuhn.Animals.AnimalFactory.prototype.cropsPaths = [
    new DeerHuhn.ScenePath(3, 656, 433, 1336, 550),
    new DeerHuhn.ScenePath(3, 914, 639, 1394, 574),
    new DeerHuhn.ScenePath(3, 1106, 822, 1480, 570),
    new DeerHuhn.ScenePath(3, 1450, 441, 1651, 343),
    new DeerHuhn.ScenePath(3, 1525, 534, 2695, 603),
    new DeerHuhn.ScenePath(3, 1579, 544, 1958, 649),
];

DeerHuhn.Animals.AnimalFactory.prototype.fieldPaths = [
    new DeerHuhn.ScenePath(4, 671, 384, 1184, 258),
    new DeerHuhn.ScenePath(4, 844, 282, 1385, 442),
    new DeerHuhn.ScenePath(4, 2734, 418, 3560, 423),
    new DeerHuhn.ScenePath(4, 2833, 463, 3421, 558),
];

DeerHuhn.Animals.AnimalFactory.prototype.housePaths = [
    new DeerHuhn.ScenePath(3, 167, 273, 638, 413),
];

DeerHuhn.Animals.AnimalFactory.prototype.barnPaths = [
    new DeerHuhn.ScenePath(3, 2281, 712, 2699, 577),
    new DeerHuhn.ScenePath(3, 2281, 712, 3188, 658),
    new DeerHuhn.ScenePath(3, 2281, 712, 2741, 744),
];

DeerHuhn.Animals.AnimalFactory.prototype.waterPaths = [
    new DeerHuhn.ScenePath(3, 394, 738, 702, 710),
    new DeerHuhn.ScenePath(3, 702, 710, 607, 855),
    new DeerHuhn.ScenePath(3, 607, 855, 313, 832),
];

DeerHuhn.Animals.AnimalFactory.prototype.forrestPaths = [
    new DeerHuhn.ScenePath(3, 91, 304, 895, 637),
    new DeerHuhn.ScenePath(3, -28, 483, 622, 378),
    new DeerHuhn.ScenePath(3, -14, 459, 896, 618),
    new DeerHuhn.ScenePath(3, -40, 514, 484, 622),
    new DeerHuhn.ScenePath(3, -23, 667, 458, 643),
    new DeerHuhn.ScenePath(3, 394, 907, 880, 921),
    new DeerHuhn.ScenePath(3, 415, 951, 1366, 576), //almost road path
    new DeerHuhn.ScenePath(3, 533, 633, 875, 657),
    new DeerHuhn.ScenePath(3, 556, 639, 1138, 808), //near lake
    new DeerHuhn.ScenePath(3, 637, 444, 1766, 772),
    new DeerHuhn.ScenePath(3, 935, 655, 1931, 667),
    new DeerHuhn.ScenePath(4, 656, 370, 1519, 421),
    new DeerHuhn.ScenePath(4, 827, 277, 1154, 264),
    new DeerHuhn.ScenePath(4, 788, 439, 1328, 489),
    new DeerHuhn.ScenePath(4, 1189, 271, 1559, 417),
    new DeerHuhn.ScenePath(3, 1141, 795, 1894, 691),
    new DeerHuhn.ScenePath(3, 1657, 339, 1969, 375),
    new DeerHuhn.ScenePath(3, 1982, 649, 2686, 592),
    new DeerHuhn.ScenePath(3, 1894, 208, 2305, 240),
    new DeerHuhn.ScenePath(3, 1907, 226, 2471, 363),
    new DeerHuhn.ScenePath(3, 2003, 370, 2312, 253),
    new DeerHuhn.ScenePath(3, 2339, 262, 2458, 306), //too short
    new DeerHuhn.ScenePath(3, 2006, 390, 2494, 354),
    new DeerHuhn.ScenePath(3, 2075, 388, 3248, 643),
    new DeerHuhn.ScenePath(3, 2011, 406, 2684, 598),
    new DeerHuhn.ScenePath(3, 2498, 354, 3251, 645),
    new DeerHuhn.ScenePath(3, 2699, 577, 3419, 576),
    new DeerHuhn.ScenePath(3, 2699, 595, 3187, 657),
    new DeerHuhn.ScenePath(4, 3013, 531, 3469, 480),
    new DeerHuhn.ScenePath(4, 3283, 264, 3575, 252),
    new DeerHuhn.ScenePath(4, 3295, 286, 3647, 391),
];

DeerHuhn.Animals.AnimalFactory.prototype.budkaPositions = [
    new DeerHuhn.ScenePositionWithScale(0, 2190, 272, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3280, 310, DeerHuhn.BASIC_ANIMAL_SCALE)
];

DeerHuhn.Animals.AnimalFactory.prototype.souskaPositions = [
    new DeerHuhn.ScenePositionWithScale(3, 914, 554, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(3, 2309, 167, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(3, 1591, 727, DeerHuhn.BASIC_ANIMAL_SCALE)
];

DeerHuhn.Animals.AnimalFactory.prototype.vetevPositions = [
    new DeerHuhn.ScenePositionWithScale(0, 3044, 225, DeerHuhn.BASIC_ANIMAL_SCALE)
];

DeerHuhn.Animals.AnimalFactory.prototype.chorosPositions = [
    new DeerHuhn.ScenePositionWithScale(0, 2185, 362, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 2175, 392, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 2200, 450, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 2185, 630, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3240, 300, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3210, 350, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3260, 400, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3280, 490, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3240, 580, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3210, 650, DeerHuhn.BASIC_ANIMAL_SCALE)
];

DeerHuhn.Animals.AnimalFactory.prototype.kvitkoPositions = [
    new DeerHuhn.ScenePositionWithScale(0, 1750, 920, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 1880, 910, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 1994, 850, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 1955, 890, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 2340, 910, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 2434, 895, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 2500, 920, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 2800, 870, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 4000, 880, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(0, 3600, 900, DeerHuhn.BASIC_ANIMAL_SCALE)
];

DeerHuhn.Animals.AnimalFactory.prototype.vykukujiciSrnecPositions = [
    new DeerHuhn.ScenePositionWithScale(3, 1444, 423, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(2, 1344, 490, new PIXI.Point(-DeerHuhn.BASIC_ANIMAL_SCALE, DeerHuhn.BASIC_ANIMAL_SCALE)),
    new DeerHuhn.ScenePositionWithScale(3, 280, 670, DeerHuhn.BASIC_ANIMAL_SCALE),
    new DeerHuhn.ScenePositionWithScale(3, 2611, 550, new PIXI.Point(-DeerHuhn.BASIC_ANIMAL_SCALE, DeerHuhn.BASIC_ANIMAL_SCALE))
];

/**
 * A fox.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Liska = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Liška', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.liska),
            onShotCallback, 
            5, 
            50.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Liska.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Liska.prototype.constructor = DeerHuhn.Animals.Liska;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Liska.prototype.getScore = function (gameTime) {
    return 5;
};

/**
 * Create a fox on a random path.
 *
 * @constructs {DeerHuhn.Animals.Liska}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Liska} A fox.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createLiska = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths, this.barnPaths, this.housePaths);
    if (path === null) return null;
    this.occupyPath(path);
    return new DeerHuhn.Animals.Liska(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.Liska = DeerHuhn.Animals.AnimalFactory.prototype.createLiska;

/**
 * A red car.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.AutoCervene = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Auto', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.auto_cervene),
            onShotCallback, 
            5, 
            100.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.AutoCervene.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.AutoCervene.prototype.constructor = DeerHuhn.Animals.AutoCervene;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.AutoCervene.prototype.getScore = function (gameTime) {
    return -10;
};

/**
 * Create a red car on a random path.
 *
 * @constructs {DeerHuhn.Animals.AutoCervene}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.AutoCervene} A red car.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createAutoCervene = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.roadPaths);
    if (path === null) return null;
    return new DeerHuhn.Animals.AutoCervene(path, onShotCallback, movementFinishedCallback);
};
DeerHuhn.Animals.AnimalFactory.factories.AutoCervene = DeerHuhn.Animals.AnimalFactory.prototype.createAutoCervene;

/**
 * A blue car.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.AutoModre = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Auto', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.auto_modre),
            onShotCallback, 
            5, 
            100.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.AutoModre.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.AutoModre.prototype.constructor = DeerHuhn.Animals.AutoModre;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.AutoModre.prototype.getScore = function (gameTime) {
    return -10;
};

/**
 * Create a blue car on a random path.
 *
 * @constructs {DeerHuhn.Animals.AutoModre}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.AutoModre} A blue car.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createAutoModre = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.roadPaths);
    if (path === null) return null;
    return new DeerHuhn.Animals.AutoModre(path, onShotCallback, movementFinishedCallback);
};
DeerHuhn.Animals.AnimalFactory.factories.AutoModre = DeerHuhn.Animals.AnimalFactory.prototype.createAutoModre;

/**
 * A floating duck.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.KachnaPlove = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Kachna', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.kachna_plove),
            onShotCallback, 
            3, 
            15.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.KachnaPlove.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.KachnaPlove.prototype.constructor = DeerHuhn.Animals.KachnaPlove;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.KachnaPlove.prototype.getScore = function (gameTime) {
    if (gameTime.getMonth() >= 9)
        return 20;
    else
        return -20;
};

/**
 * Create a floating duck on a random path.
 *
 * @constructs {DeerHuhn.Animals.KachnaPlove}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.KachnaPlove} A floating duck.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createKachnaPlove = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.waterPaths);
    if (path === null) return null;
    this.occupyPath(path);
    return new DeerHuhn.Animals.KachnaPlove(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.KachnaPlove = DeerHuhn.Animals.AnimalFactory.prototype.createKachnaPlove;

/**
 * A flying duck.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Kachna = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Kachna', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.kachna),
            onShotCallback, 
            8, 
            70.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Kachna.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Kachna.prototype.constructor = DeerHuhn.Animals.Kachna;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Kachna.prototype.getScore = function (gameTime) {
    return DeerHuhn.Animals.Kachna.getStaticScore(gameTime);    
};

/**
 * Return the score for shooting the animal regardless of its specific properties.
 *
 * This e.g. ignores the number of children or so.
 *
 * @param {GameTime} gameTime The time of the game.
 * @return {int} The score for shooting the animal regardless of its specific properties.
 */
DeerHuhn.Animals.Kachna.getStaticScore = function (gameTime) {
    if (gameTime.getMonth() >= 9)
        return 10;
    else
        return -10;
};

/**
 * Create a flying duck on a random path.
 *
 * @constructs {DeerHuhn.Animals.Kachna}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Kachna} A flying duck.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createKachna = function (onShotCallback, movementFinishedCallback) {
    var possibleLayers = [1, 2, 4, 5];
    var layer = possibleLayers[randInt(0, possibleLayers.length-1)];

    var yLeft = randInt(20, 940);
    var yRight = randInt(20, 940);

    var path = new DeerHuhn.ScenePath(layer, -50, yLeft, 3800, yRight);
    this.occupyPath(path);

    return new DeerHuhn.Animals.Kachna(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.Kachna = DeerHuhn.Animals.AnimalFactory.prototype.createKachna;

/**
 * A block of logs.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Klady = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Klády', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.klady),
            onShotCallback, 
            5, 
            30.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Klady.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Klady.prototype.constructor = DeerHuhn.Animals.Klady;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Klady.prototype.getScore = function (gameTime) {
    return -10;
};

// do not allow a block of woods to move without the tractor
DeerHuhn.Animals.Klady.prototype.updatePosition = function (timeDelta) {
    if (this.parentAnimal === null)
        return;

    DeerHuhn.MovingAnimatedObject.prototype.updatePosition.call(this, timeDelta);
};

/**
 * Create a block of logs on a random path.
 *
 * @constructs {DeerHuhn.Animals.Klady}
 * @param {DeerHuhn.Animals.LKT} parentLKT The tractor handling this block of woods.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Klady} A block of logs.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createKlady = function (parentLKT, onShotCallback, movementFinishedCallback) {
    var path = parentLKT.scenePath;
    var klady = new DeerHuhn.Animals.Klady(path, onShotCallback, movementFinishedCallback);
    klady.parentAnimal = parentLKT;
    return klady;
};
// we don't want a block of logs to be constructed automatically
//DeerHuhn.Animals.AnimalFactory.factories.Klady = DeerHuhn.Animals.AnimalFactory.prototype.createKlady;

/**
 * A tractor.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.LKT = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'LKT', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.lkt),
            onShotCallback, 
            5, 
            30.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.LKT.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.LKT.prototype.constructor = DeerHuhn.Animals.LKT;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.LKT.prototype.getScore = function (gameTime) {
    return -20;
};

/**
 * Create a tractor on a random path.
 *
 * @constructs {DeerHuhn.Animals.LKT}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.LKT} A tractor.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createLKT = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths);
    if (path === null) return null;
    this.occupyPath(path);
    return new DeerHuhn.Animals.LKT(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.LKT = DeerHuhn.Animals.AnimalFactory.prototype.createLKT;

/**
 * Create a tractor handling a block of woods on a random path.
 *
 * @constructs {DeerHuhn.Animals.LKT}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.LKT} A tractor.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createLKTWithKlady = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths);
    if (path === null) return null;
    this.occupyPath(path);

    var lkt = new DeerHuhn.Animals.LKT(path, onShotCallback, movementFinishedCallback);
    var klady = this.createKlady(lkt, onShotCallback, movementFinishedCallback);

    var movementFinished = function() {
        var cb = this.wrapMovementFinishedCallback(movementFinishedCallback);
        cb.call(null, lkt);
        // remove also the wood
        if (!klady.shot && lkt.childrenToSpawn.length === 0 && klady.sprite.parent !== null)
            // only remove when the wood has not yet been shot
            // if the player shoots the tractor before the wood appears, do not try to remove the wood
            // the .parent check is there to avoid synchronization issues, which can occur relatively often
            movementFinishedCallback.call(null, klady);
    }.bind(this);
    lkt.movementFinishedCallback = movementFinished;

    lkt.childrenAnimals.push(klady);
    lkt.childrenToSpawn.push(new DeerHuhn.AnimalToSpawn(klady, 2000, true));

    lkt.name = "LKT s náloží";

    return lkt;
};
DeerHuhn.Animals.AnimalFactory.factories.LKTWithKlady = DeerHuhn.Animals.AnimalFactory.prototype.createLKTWithKlady;

/**
 * A collector.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Odvozka = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Odvozka', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.odvozka),
            onShotCallback, 
            5, 
            30.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Odvozka.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Odvozka.prototype.constructor = DeerHuhn.Animals.Odvozka;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Odvozka.prototype.getScore = function (gameTime) {
    return -20;
};

/**
 * Create a collector on a random path.
 *
 * @constructs {DeerHuhn.Animals.Odvozka}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Odvozka} A collector.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createOdvozka = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.roadPaths);
    if (path === null) return null;
    return new DeerHuhn.Animals.Odvozka(path, onShotCallback, movementFinishedCallback);
};
DeerHuhn.Animals.AnimalFactory.factories.Odvozka = DeerHuhn.Animals.AnimalFactory.prototype.createOdvozka;

/**
 * A sheep.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Ovce = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Ovce', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.ovce),
            onShotCallback, 
            3, 
            5.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Ovce.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Ovce.prototype.constructor = DeerHuhn.Animals.Ovce;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Ovce.prototype.getScore = function (gameTime) {
    return DeerHuhn.Animals.Ovce.getStaticScore(gameTime);
};

/**
 * Return the score for shooting the animal regardless of its specific properties.
 *
 * This e.g. ignores the number of children or so.
 *
 * @param {GameTime} gameTime The time of the game.
 * @return {int} The score for shooting the animal regardless of its specific properties.
 */
DeerHuhn.Animals.Ovce.getStaticScore = function (gameTime) {
    return -20;
};

/**
 * Create a sheep on a random path.
 *
 * @constructs {DeerHuhn.Animals.Ovce}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Ovce} A sheep.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createOvce = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths, this.fieldPaths, this.barnPaths, this.housePaths);
    if (path === null) return null;
    this.occupyPath(path);
    return new DeerHuhn.Animals.Ovce(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.Ovce = DeerHuhn.Animals.AnimalFactory.prototype.createOvce;

/**
 * A wild boar.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Prase = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Prase', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.prase),
            onShotCallback, 
            5, 
            70.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Prase.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Prase.prototype.constructor = DeerHuhn.Animals.Prase;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Prase.prototype.getScore = function (gameTime) {
    if (this.childrenAnimals.length > 0)
        // negative points for shooting mother boar
        return -25;
    else 
        return DeerHuhn.Animals.Prase.getStaticScore(gameTime);
};

/**
 * Return the score for shooting the animal regardless of its specific properties.
 *
 * This e.g. ignores the number of children or so.
 *
 * @param {GameTime} gameTime The time of the game.
 * @return {int} The score for shooting the animal regardless of its specific properties.
 */
DeerHuhn.Animals.Prase.getStaticScore = function (gameTime) {
    if (gameTime.getMonth() < 8)
        return -25;
    else
        return 25;
};

/**
 * Create a wild boar on a random path.
 *
 * @constructs {DeerHuhn.Animals.Prase}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Prase} A wild boar.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createPrase = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths, this.cropsPaths, this.barnPaths, this.fieldPaths);
    if (path === null) return null;
    this.occupyPath(path);
    return new DeerHuhn.Animals.Prase(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.Prase = DeerHuhn.Animals.AnimalFactory.prototype.createPrase;

/**
 * Create a wild boar family on a random path.
 *
 * @constructs {DeerHuhn.Animals.Prase}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target. The callback is also used for the children animals.
 * @return {DeerHuhn.Animals.Prase} A wild boar with family.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createVlacek = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths, this.cropsPaths, this.barnPaths, this.fieldPaths);
    if (path === null) return null;
    this.occupyPath(path);
    var prase = new DeerHuhn.Animals.Prase(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));

    var numChildren = randInt(2, 4);
    var childSpawnDelay = 700;

    for (var i=1; i <= numChildren; i++) {
        var sele = this.createSeleForPrase(prase, onShotCallback, movementFinishedCallback);
        prase.childrenAnimals.push(sele);
        prase.childrenToSpawn.push(new DeerHuhn.AnimalToSpawn(sele, i*childSpawnDelay));
    }

    return prase;
};
DeerHuhn.Animals.AnimalFactory.factories.Vlacek = DeerHuhn.Animals.AnimalFactory.prototype.createVlacek;

/**
 * A wild boar child.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Sele = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Sele', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.sele),
            onShotCallback, 
            8, 
            70.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Sele.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Sele.prototype.constructor = DeerHuhn.Animals.Sele;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Sele.prototype.getScore = function (gameTime) {
    return 10;
};

/**
 * Create a wild boar child on a random path.
 *
 * @constructs {DeerHuhn.Animals.Sele}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Sele} A wild boar child.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createSele = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths, this.cropsPaths, this.barnPaths, this.fieldPaths);
    if (path === null) return null;
    this.occupyPath(path);
    return new DeerHuhn.Animals.Sele(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.Sele = DeerHuhn.Animals.AnimalFactory.prototype.createSele;

/**
 * Create a wild boar child on a random path.
 *
 * @constructs {DeerHuhn.Animals.Sele}
 * @param {DeerHuhn.Animals.Prase} The parent of this wild boar child.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Sele} A wild boar child.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createSeleForPrase = function (prase, onShotCallback, movementFinishedCallback) {
    var sele = new DeerHuhn.Animals.Sele(prase.scenePath, onShotCallback, movementFinishedCallback);
    sele.parentAnimal = prase;
    return sele;
};

/**
 * A deer.
 *
 * @constructor
 * @param {DeerHuhn.ScenePath} scenePath The path this object moves along.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 */
DeerHuhn.Animals.Srna = function (scenePath, onShotCallback, movementFinishedCallback) {
    DeerHuhn.Animal.call(this, 
            'Srna', 
            new PIXI.SmoothMovieClip(DeerHuhn.Animals.animationTexturesCache.srna),
            onShotCallback, 
            6, 
            60.0/1000, 
            scenePath, 
            movementFinishedCallback);
};
DeerHuhn.Animals.Srna.prototype = Object.create(DeerHuhn.Animal.prototype);
DeerHuhn.Animals.Srna.prototype.constructor = DeerHuhn.Animals.Srna;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Srna.prototype.getScore = function (gameTime) {
    return DeerHuhn.Animals.Srna.getStaticScore(gameTime);
};

/**
 * Return the score for shooting the animal regardless of its specific properties.
 *
 * This e.g. ignores the number of children or so.
 *
 * @param {GameTime} gameTime The time of the game.
 * @return {int} The score for shooting the animal regardless of its specific properties.
 */
DeerHuhn.Animals.Srna.getStaticScore = function (gameTime) {
    if (((gameTime.getMonth() >= 5 && gameTime.getDay() >= 16) || gameTime.getMonth() >= 6) && gameTime.getMonth() < 10) 
        return 15;
    else
        return -15;
};

/**
 * Create a deer on a random path.
 *
 * @constructs {DeerHuhn.Animals.Srna}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @param {movementFinishedCallback} movementFinishedCallback The callback to call when the object arrives at its target.
 * @return {DeerHuhn.Animals.Srna} A deer.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createSrna = function (onShotCallback, movementFinishedCallback) {
    var path = this.getRandomPath(this.forrestPaths, this.barnPaths, this.fieldPaths);
    if (path === null) return null;
    this.occupyPath(path);
    return new DeerHuhn.Animals.Srna(path, onShotCallback, this.wrapMovementFinishedCallback(movementFinishedCallback));
};
DeerHuhn.Animals.AnimalFactory.factories.Srna = DeerHuhn.Animals.AnimalFactory.prototype.createSrna;


// STATIC OBJECTS

/**
 * A bird's house.
 *
 * @constructor
 * @param {DeerHuhn.ScenePosition} scenePosition Position in the scene.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 */
DeerHuhn.Animals.Budka = function (scenePosition, onShotCallback) {
    DeerHuhn.StaticShootableObject.call(this,  
            'Budka',
            new PIXI.Sprite(PIXI.TextureCache['budka.png']),
            scenePosition,
            onShotCallback);
};
DeerHuhn.Animals.Budka.prototype = Object.create(DeerHuhn.StaticShootableObject.prototype);
DeerHuhn.Animals.Budka.prototype.constructor = DeerHuhn.Animals.Budka;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Budka.prototype.getScore = function (gameTime) {
    return -20;
};

/**
 * Create a bird's house on a random position.
 *
 * @constructs {DeerHuhn.Animals.Budka}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @return {DeerHuhn.Animals.Budka} A bird's house.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createBudka = function (onShotCallback) {
    var position = this.getRandomPosition(this.budkaPositions);
    if (position === null) return null;
    return new DeerHuhn.Animals.Budka(position, onShotCallback);
};



/**
 * A dead tree.
 *
 * @constructor
 * @param {DeerHuhn.ScenePosition} scenePosition Position in the scene.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 */
DeerHuhn.Animals.Souska = function (scenePosition, onShotCallback) {
    var textures = [PIXI.TextureCache['souska_rovna.png'], PIXI.TextureCache['souska_v_porostu.png'], PIXI.TextureCache['souska_vychylena.png']];
    var randIdx = randInt(0, textures.length-1);
    DeerHuhn.StaticShootableObject.call(this,  
            'Souška',
            new PIXI.Sprite(textures[randIdx]),
            scenePosition,
            onShotCallback);
};
DeerHuhn.Animals.Souska.prototype = Object.create(DeerHuhn.StaticShootableObject.prototype);
DeerHuhn.Animals.Souska.prototype.constructor = DeerHuhn.Animals.Souska;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Souska.prototype.getScore = function (gameTime) {
    return 20;
};

/**
 * Create a dead tree on a random position.
 *
 * @constructs {DeerHuhn.Animals.Souska}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @return {DeerHuhn.Animals.Budka} A dead tree.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createSouska = function (onShotCallback) {
    var position = this.getRandomPosition(this.souskaPositions);
    if (position === null) return null;
    this.occupyPosition(position);

    var animal = new DeerHuhn.Animals.Souska(position, this.wrapOnShotCallback(onShotCallback));

    animal.onHidden = function () {
        this.freePosition(position);
    }.bind(this);

    return animal;
};



/**
 * A dead tree branch.
 *
 * @constructor
 * @param {DeerHuhn.ScenePosition} scenePosition Position in the scene.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 */
DeerHuhn.Animals.Vetev = function (scenePosition, onShotCallback) {
    DeerHuhn.StaticShootableObject.call(this,  
            'Větev',
            new PIXI.Sprite(PIXI.TextureCache['vetev.png']),
            scenePosition,
            onShotCallback);
};
DeerHuhn.Animals.Vetev.prototype = Object.create(DeerHuhn.StaticShootableObject.prototype);
DeerHuhn.Animals.Vetev.prototype.constructor = DeerHuhn.Animals.Vetev;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Vetev.prototype.getScore = function (gameTime) {
    return 10;
};

/**
 * Create a dead tree branch on a random position.
 *
 * @constructs {DeerHuhn.Animals.Vetev}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @return {DeerHuhn.Animals.Vetev} A dead tree branch
 */
DeerHuhn.Animals.AnimalFactory.prototype.createVetev = function (onShotCallback) {
    var position = this.getRandomPosition(this.vetevPositions);
    if (position === null) return null;
    return new DeerHuhn.Animals.Vetev(position, onShotCallback);
};



/**
 * A tree mushroom.
 *
 * @constructor
 * @param {DeerHuhn.ScenePosition} scenePosition Position in the scene.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 */
DeerHuhn.Animals.Choros = function (scenePosition, onShotCallback) {
    DeerHuhn.StaticShootableObject.call(this,  
            'Choroš',
            new PIXI.Sprite(PIXI.TextureCache['choros.png']),
            scenePosition,
            onShotCallback);
};
DeerHuhn.Animals.Choros.prototype = Object.create(DeerHuhn.StaticShootableObject.prototype);
DeerHuhn.Animals.Choros.prototype.constructor = DeerHuhn.Animals.Choros;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Choros.prototype.getScore = function (gameTime) {
    return 15;
};

/**
 * Create a tree mushroom on a random position.
 *
 * @constructs {DeerHuhn.Animals.Choros}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @return {DeerHuhn.Animals.Choros} A dead tree branch
 */
DeerHuhn.Animals.AnimalFactory.prototype.createChoros = function (onShotCallback) {
    var position = this.getRandomPosition(this.chorosPositions);
    if (position === null) return null;
    this.occupyPosition(position);

    var animal = new DeerHuhn.Animals.Choros(position, this.wrapOnShotCallback(onShotCallback));

    animal.onHidden = function () {
        this.freePosition(position);
    }.bind(this);

    return animal;
};



/**
 * A flower.
 *
 * @constructor
 * @param {DeerHuhn.ScenePosition} scenePosition Position in the scene.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 */
DeerHuhn.Animals.Kvitko = function (scenePosition, onShotCallback) {
    var textures = [PIXI.TextureCache['kvitko_cervene.png'], PIXI.TextureCache['kvitko_oranzove.png']];
    var randIdx = randInt(0, textures.length-1);
    DeerHuhn.StaticShootableObject.call(this,  
            'Kvítko',
            new PIXI.Sprite(textures[randIdx]),
            scenePosition,
            onShotCallback);

    var hideTime = randInt(3, 10) * 1000;
    this.hideAfter = hideTime;
};
DeerHuhn.Animals.Kvitko.prototype = Object.create(DeerHuhn.StaticShootableObject.prototype);
DeerHuhn.Animals.Kvitko.prototype.constructor = DeerHuhn.Animals.Kvitko;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.Kvitko.prototype.getScore = function (gameTime) {
    return 5;
};

/**
 * Create a flower on a random position.
 *
 * @constructs {DeerHuhn.Animals.Kvitko}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @return {DeerHuhn.Animals.Kvitko} A flower.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createKvitko = function (onShotCallback) {
    var position = this.getRandomPosition(this.kvitkoPositions);
    if (position === null) return null;
    this.occupyPosition(position);

    var animal = new DeerHuhn.Animals.Kvitko(position, this.wrapOnShotCallback(onShotCallback));

    animal.onHidden = function () {
        this.freePosition(position);
    }.bind(this);

    return animal;
};
DeerHuhn.Animals.AnimalFactory.staticFactories.Kvitko = DeerHuhn.Animals.AnimalFactory.prototype.createKvitko;



/**
 * A static deer.
 *
 * @constructor
 * @param {DeerHuhn.ScenePosition} scenePosition Position in the scene.
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 */
DeerHuhn.Animals.VykukujiciSrnec = function (scenePosition, onShotCallback) {
    DeerHuhn.StaticShootableObject.call(this,  
            'Srna',
            new PIXI.Sprite(PIXI.TextureCache['srna_kouka.png']),
            scenePosition,
            onShotCallback);

    this.hideAfter = 5000;
};
DeerHuhn.Animals.VykukujiciSrnec.prototype = Object.create(DeerHuhn.StaticShootableObject.prototype);
DeerHuhn.Animals.VykukujiciSrnec.prototype.constructor = DeerHuhn.Animals.VykukujiciSrnec;

/**
 * @inheritDoc
 */
DeerHuhn.Animals.VykukujiciSrnec.prototype.getScore = function (gameTime) {
    return DeerHuhn.Animals.Srna.getStaticScore(gameTime);
};

/**
 * Create a static deer on a random position.
 *
 * @constructs {DeerHuhn.Animals.VykukujiciSrnec}
 * @param {onShotCallback} onShotCallback The callback to call when this object is shot.
 * @return {DeerHuhn.Animals.VykukujiciSrnec} A static deer.
 */
DeerHuhn.Animals.AnimalFactory.prototype.createVykukujiciSrnec = function (onShotCallback) {
    var position = this.getRandomPosition(this.vykukujiciSrnecPositions);
    if (position === null) return null;
    this.occupyPosition(position);

    var animal = new DeerHuhn.Animals.VykukujiciSrnec(position, this.wrapOnShotCallback(onShotCallback));

    animal.onHidden = function () {
        this.freePosition(position);
    }.bind(this);

    return animal;
};
DeerHuhn.Animals.AnimalFactory.staticFactories.VykukujiciSrnec = DeerHuhn.Animals.AnimalFactory.prototype.createVykukujiciSrnec;
